"use strict";(self.webpackChunkgatsby_redux_material_ui_boilerplate=self.webpackChunkgatsby_redux_material_ui_boilerplate||[]).push([[998],{86693:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var r=n(59713),a=n.n(r),o=n(48926),u=n.n(o),i=n(63038),l=n.n(i),c=n(87757),s=n.n(c),d=n(67294),p=(n(36176),n(17951)),f=(n(90174),n(24251),n(38538),n(92492),n(8359),n(68152)),v=(n(27591),n(48767),n(36916),n(44325),n(89493),n(69360)),h=(n(20332),n(59263),n(57154),n(26651)),m=(n(35313),n(31825)),x=(n(15966),n(21846)),j=n(29499),y=n(12067),b=n(85893),w=(0,y.Z)((0,b.jsx)("path",{d:"m19.93 8.21-3.6 1.68L14 7.7V6.3l2.33-2.19 3.6 1.68c.38.18.82.01 1-.36.18-.38.01-.82-.36-1L16.65 2.6c-.38-.18-.83-.1-1.13.2l-1.74 1.6c-.18-.24-.46-.4-.78-.4-.55 0-1 .45-1 1v1H8.82C8.34 4.65 6.98 3.73 5.4 4.07c-1.16.25-2.15 1.25-2.36 2.43-.22 1.32.46 2.47 1.48 3.08L7.08 18H4v3h13v-3h-3.62L8.41 8.77c.17-.24.31-.49.41-.77H12v1c0 .55.45 1 1 1 .32 0 .6-.16.78-.4l1.74 1.6c.3.3.75.38 1.13.2l3.92-1.83c.38-.18.54-.62.36-1-.18-.37-.62-.54-1-.36zM6 8c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}),"PrecisionManufacturing");function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P=d.useEffect,Z=((0,f.Z)({}),function(t){var e,n,r,a,o,i,c,f,j,y,O=(0,h.Z)(),Z=O.isAuth,k=(O.env,(0,d.useState)([])),C=l()(k,2),_=C[0],D=C[1],A=function(){var e=u()(s().mark((function e(){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Z.Cloud.run("queryItems",{type:"post",query:{equalTo:["tag.slug",t.id]}});case 2:n=e.sent,r=l()(n,1),a=r[0],D(a||[]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var t=u()(s().mark((function t(e){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.Z.Cloud.run("post",{title:null==_||null===(n=_.data)||void 0===n?void 0:n.title,data:{comment:e}});case 2:A();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=u()(s().mark((function t(e){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.Z.Cloud.run("post",{title:null==_||null===(n=_.data)||void 0===n?void 0:n.title,data:{thread:e}});case 2:A();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=u()(s().mark((function t(e,n,r){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.Z.Cloud.run("deletePostData",{title:e,key:n,id:r._id});case 2:A();case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return P(u()(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A();case 1:case"end":return t.stop()}}),t)}))),[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Z,{cardProps:{noAvatar:!0},data:[{title:null==_||null===(e=_.data)||void 0===e?void 0:e.title}]}),!(null!=_&&null!==(n=_.data)&&void 0!==n&&null!==(r=n.threads)&&void 0!==r&&r.length)&&(0,b.jsx)(m.Z,{data:[{rawContent:(0,b.jsxs)(p.Z,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[(0,b.jsx)("h3",{children:"Hold on a sec, Our AI will be replying soon."}),(0,b.jsx)(w,{sx:{fontSize:128}})]})}]}),(0,b.jsx)(m.Z,{cardProps:{handleDelete:function(t){var e;return L(null==_||null===(e=_.data)||void 0===e?void 0:e.title,"threads",t)},isAuth:"admin"===(null===(a=Z())||void 0===a?void 0:a.role)},data:(y=null==_||null===(o=_.data)||void 0===o?void 0:o.threads,(null==y?void 0:y.map((function(t){return g({title:"AI TCM"},t)})))||[])}),"admin"===(null===(i=Z())||void 0===i?void 0:i.role)&&(0,b.jsx)(x.Z,{onPost:I}),(0,b.jsx)("h2",{children:"Comments"}),(0,b.jsx)(m.Z,{cardProps:{handleDelete:function(t){var e;return L(null==_||null===(e=_.data)||void 0===e?void 0:e.title,"comments",t)},isAuth:"admin"===(null===(c=Z())||void 0===c?void 0:c.role)},data:(j=null==_||null===(f=_.data)||void 0===f?void 0:f.comments,(null==j?void 0:j.map((function(t){return g({title:t.content},t)})))||[])}),(0,b.jsx)(x.Z,{onPost:H})]})}),k=function(t){t.data,t.location;return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(j.Router,{children:(0,b.jsx)(Z,{path:"/post/:id"})})})}}}]);